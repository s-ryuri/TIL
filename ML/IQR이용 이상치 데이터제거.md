# IQR이용 이상치 데이터제거

이상치 데이터(Outlier)는 전체 데이터의 패턴에서 벗어난 이상 값을 가진 데이터이다. outlier로 인해 머신러닝 모델의 성능에 영향을 받는 경우가 발생하기 쉽다.

이상치를 찾는 방법에는 IQR(Inter Quantile Range) 방식을 적용해서 찾을 수 있다.
IQR은 사분위 값의 편차를 이용하는 기법으로 Box Plit으로 시각화할 수 있다.

일단 먼저 사분위란 전체 데이터를 값이 높은 순으로 정렬하고 이를 1/4(25%) 씩으로 구간을 분할하는 것을 지칭한다. 1/4구간은 Q1, Q2, Q3, Q4로 나눈다. 여기서 25% 구간이 Q1 ~ 75 % 구간인 Q3의 범위를 IQR이라 한다.

![image](https://user-images.githubusercontent.com/66999675/132283808-6583cb09-535b-47f5-9003-bda3286490ce.png)  

IQR를 이용해 이상치 데이터를 검출하는 방식은 보통 IQR에 1.5를 곱해서 생성된 범위를 이용해 최댓값과 최솟값을 결정한 뒤 최댓값을 초과하거나 최솟값에 미달하는 데이터를 이상치로 간주하는 것이다.

3/4 분 위수(Q3)에 IQR * 1.5를 더해서 일반적인 데이터가 가질 수 있는 최댓값으로 가정하고, 1/4 분위수 (Q1)에 IQR * 1.5를 빼서 일반적인 데이터가 가질 수 있는 최솟값으로 가정한다.   
1.5 말고 다른 수도 가능하다 보통 1.5를 적용한다. 이렇게 결정된 최댓값보다 큰 값 또는 최솟값보다 작은 값을 이상치 데이터로 간주한다.  

![image](https://user-images.githubusercontent.com/66999675/132283835-226b7851-6aec-44d4-85ed-95a3dab9c5bc.png)

이상치 데이터를 IQR를 이용해서 제거할 때는 먼저 어떤 피처의 이상치 데이터를 검출할 것인지를 선택할 필요가 있다. 매우 많은 피처가 있을 경우 이들 중 결정값(레이블)과 가장 상관성이 높은 피처들을 위주로 이상치를 검출하는 것이 좋다.   
모든 피처들의 이상치를 검출하는 것은 시간이 많이 소모되며, 결정값과 상관성이 높지 않은 피처들의 경우는 이상치를 제거하더라도 크게 성능 향상에 기여하지 않는다.
